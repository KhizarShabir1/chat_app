<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title> Client</title>
    </head>

    <body>
        <form >
            <label for="fname">Name: </label>
            <input   id="fname" type="text" name="fname" value="John" >
            
            <br><br>
            <label for="lname">Locale: </label>

            <select name = "dropdown" id="locale">
                <option value = "English" >English</option>
                <option value = "German" selected>German</option>
                <option value = "Spanish">Spanish</option>

             </select>

             <br><br>


            <button type="button" onclick="myFunction()">Submit</button>
          </form> 
          
        <script>
            const ws = new WebSocket("ws://localhost:3000")

            function myFunction() {
                sendConnection(ws)
            }

            function sendConnection(ws){
                        var name = document.getElementById("fname").value
                        var select = document.getElementById("locale")
                        var locale = select.options[select.selectedIndex].value
                        console.log(name + locale)
                        ws.send(name +':'+locale)
                    }
            
            ws.onopen = () => document.getElementById("sendConnection").onclick = sendConnection(ws)
            
            //document.getElementById("sendConnection").onclick = sendConnection(ws)
            // when there is an incoming message
            
            ws.onmessage = (msg) => console.log("message from the server: ", msg.data)

        </script>
    </body>
    </html>